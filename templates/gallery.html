{% extends 'base.html' %}
{% load static %}


{% block content %}
<div class="gallery-section" id="gallery">
    <div class="section-header">
        <h1>Our Work</h1>
        <p>Discover our exceptional printing portfolio where creativity meets precision. Each piece tells a story of quality craftsmanship and attention to detail.</p>
    </div>

    <div class="filter-container">
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">All</button>
            {% for tag in all_tags %}
            <button class="filter-btn" data-filter="{{ tag.name|lower }}">{{ tag.name }}</button>
            {% empty %}
            <button class="filter-btn" data-filter="logo">Logos</button>
            <button class="filter-btn" data-filter="banner">Banners</button>
            <button class="filter-btn" data-filter="poster">Posters</button>
            <button class="filter-btn" data-filter="brochure">Brochures</button>
            {% endfor %}
        </div>
        <button class="clear-filters-btn" id="clear-filters">Clear Filters</button>
    </div>

    <div class="gallery-grid" id="galleryGrid">
        {% for item in portfolio_items %}
        <div class="gallery-item" data-category="{% for tag in item.tags.all %}{{ tag.name|lower }}{% if not forloop.last %} {% endif %}{% endfor %}">
            <a href="{{ item.get_image_url }}" class="lightbox-link">
                <img src="{{ item.get_image_url }}" alt="{{ item.title }}" class="gallery-img"
                     onerror="this.onerror=null; this.src='{% static 'default.jpg' %}';">
            </a>
            <div class="gallery-overlay">
                <h3>{{ item.title }}</h3>
                <p>{{ item.description|truncatechars:100|default:"Premium printing project showcasing our quality work." }}</p>
                {% if item.tags.count %}
                <div class="tags">
                    {% for tag in item.tags.all %}
                        <span class="tag-pill">{{ tag.name }}</span>
                    {% endfor %}
                </div>
                {% endif %}
                <div class="view-btn">
                    <i class="fas fa-expand"></i>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="no-portfolio-items" style="grid-column: 1 / -1; text-align: center; padding: 3rem;">
            <i class="fas fa-images" style="font-size: 3rem; color: var(--gray); margin-bottom: 1rem;"></i>
            <h3>No Portfolio Items Yet</h3>
            <p>Add some portfolio items to showcase your work!</p>
        </div>
        {% endfor %}
    </div>

    <div class="loading-spinner-container" id="loadingSpinner" style="display: none;">
        <div class="spinner"></div>
        <p>Loading more amazing work...</p>
    </div>

    <div class="no-results" id="noResults" style="display: none;">
        <i class="fas fa-search"></i>
        <p>No results found. Try a different search term.</p>
    </div>
</div>
{% endblock %}