{% extends 'base.html' %} {% load static %} {% block title %} Gallery -
PrintCraft Pro {% endblock %} {% block styles %}
<link rel="stylesheet" href="{% static 'css/gallery.css' %}" />
<style>
  .fa-spinner.fa-spin {
    animation: fa-spin 2s infinite linear;
  }
  @keyframes fa-spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
</style>
{% endblock %} {% block content %}
<!-- Gallery Hero -->
<section class="hero is-medium">
  <div class="hero-body">
    <div class="container has-text-centered">
      <h1 class="hero-title">Transform Your Ideas Into Print</h1>
      <p class="hero-subtitle">
        From stunning business cards to eye-catching apparel, we bring your
        vision to life with professional printing excellence
      </p>

      <!-- Search and Filter Controls in Hero -->
      <div class="hero-search-section">
        <div class="search-wrapper">
          <div class="control has-icons-left">
            <input
              class="input search-input"
              type="text"
              placeholder="Search by title, description, or tags..."
              id="searchInput"
            />
            <span class="icon is-left search-icon">
              <i class="fas fa-search"></i>
            </span>
          </div>
        </div>

        <div class="filter-tags" id="filterTags">
          <span class="filter-tag active" data-tag="all">All</span>
          <!-- Dynamic tags will be loaded here -->
          <span
            class="filter-tag loading"
            id="tagsLoading"
            style="display: none"
          >
            <i class="fas fa-spinner fa-spin"></i> Loading...
          </span>
          <span
            class="filter-tag no-tags"
            id="noTags"
            style="display: none; color: #888; font-style: italic"
          >
            No tags available
          </span>
        </div>

        <button class="button clear-filters-btn" id="clearFilters">
          <i class="fas fa-times mr-1"></i> Clear Filters
        </button>
      </div>
    </div>
  </div>
</section>

<!-- Gallery Grid -->
<section class="section">
  <div class="container">
    <div class="gallery-grid" id="galleryGrid">
      <!-- Gallery items will be populated here -->
    </div>

    <!-- Template for gallery card to reduce HTML in JS -->
    <template id="galleryItemTemplate">
      <div class="gallery-card animate-on-scroll">
        <div class="gallery-item" data-src="">
          <div class="gallery-card-image">
            <img class="lazy-image image-skeleton" data-src="" alt="">
            <div class="gallery-preview-indicator">
              <i class="fas fa-eye"></i>
            </div>
            <div class="gallery-card-overlay">
              <i class="fas fa-search-plus has-text-white is-size-2"></i>
            </div>
          </div>
          <div class="gallery-card-content">
            <h3 class="title is-5 has-text-light gallery-title"></h3>
            <p class="has-text-grey-light gallery-desc"></p>
            <div class="gallery-card-tags"></div>
          </div>
        </div>
      </div>
    </template>

    <!-- Infinite scroll sentinel -->
    <div id="infiniteScrollSentinel" class="infinite-scroll-sentinel" aria-hidden="true"></div>
    
    <!-- Loading spinner for infinite scroll -->
    <div id="loadingSpinner" class="has-text-centered" style="display: none; padding: 2rem;">
      <i class="fas fa-spinner fa-spin" style="font-size: 2rem; color: #666;"></i>
      <p class="has-text-grey" style="margin-top: 0.5rem;">Loading more items...</p>
    </div>

    <!-- No results message -->
    <div class="no-results-message" id="noResultsMessage" style="display: none">
      <div class="has-text-centered" style="padding: 3rem">
        <i
          class="fas fa-search"
          style="font-size: 3rem; color: #ccc; margin-bottom: 1rem"
        ></i>
        <h3 class="title is-4 has-text-grey">No items found</h3>
        <p class="has-text-grey" style="margin-bottom: 1.5rem">
          <span id="noResultsText"
            >No portfolio items available at the moment.</span
          >
        </p>
        <button class="button is-primary" id="clearAllFiltersBtn">
          <i class="fas fa-times mr-1"></i> Clear All Filters
        </button>
      </div>
    </div>

    <!-- Keep for very old browsers as a fallback, but hidden by default -->
    <div class="load-more-container" style="display: none">
      <button class="button load-more-btn" id="loadMoreBtn">
        <i class="fas fa-plus mr-2"></i> Load More
      </button>
    </div>
  </div>
</section>

<!-- Testimonials Section -->
{% include "components/testimonials.html" %}

{% endblock %} {% block scripts %}
<script>
  window.GALLERY_CONFIG = {
    apiEndpoint: "{% url 'gallery:gallery_api' %}",
    tagsApiEndpoint: "{% url 'gallery:gallery_tags_api' %}",
    defaultImage: "{% static 'default.png' %}",
    itemsPerPage: 6
  };
</script>
<script defer src="{% static 'js/gallery.js' %}"></script>

{% endblock %}
