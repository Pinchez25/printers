<!DOCTYPE html>
<html lang="en">
{% load static %}

<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>
        Peashan Brands - Premium Printing & Branding Solutions in Kenya
    </title>

    <!-- SEO Meta Tags -->
    <meta
            name="description"
            content="Peashan Brands is a premium printing and branding company in Nairobi, Kenya. We specialise in banners, stickers, merchandise branding, hospital stationery, campaign items, packaging solutions, and professional marketing materials."
    />
    <meta
            name="keywords"
            content="printing Kenya, branding Nairobi, banners stickers, merchandise branding, hospital stationery, campaign items, packaging solutions, brochures flyers, vehicle wraps, signage Kenya, printing company Nairobi"
    />
    <meta name="author" content="Peashan Brands"/>
    <meta name="robots" content="index, follow"/>
    <link rel="canonical" href="https://peashan.co.ke"/>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://peashan.co.ke"/>
    <meta
            property="og:title"
            content="Peashan Brands - Premium Printing & Branding Solutions in Kenya"
    />
    <meta
            property="og:description"
            content="Premium printing and branding company in Nairobi, Kenya. We specialise in banners, stickers, merchandise branding, hospital stationery, campaign items, packaging solutions, and professional marketing materials."
    />
    <meta
            property="og:image"
            content="https://picsum.photos/1200/630?random=peashan"
    />
    <meta property="og:site_name" content="Peashan Brands"/>

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image"/>
    <meta property="twitter:url" content="https://peashan.co.ke"/>
    <meta
            property="twitter:title"
            content="Peashan Brands - Premium Printing & Branding Solutions in Kenya"
    />
    <meta
            property="twitter:description"
            content="Premium printing and branding company in Nairobi, Kenya. We specialise in banners, stickers, merchandise branding, hospital stationery, campaign items, packaging solutions, and professional marketing materials."
    />
    <meta
            property="twitter:image"
            content="https://picsum.photos/1200/630?random=peashan"
    />

    <!-- Additional SEO -->
    <meta name="theme-color" content="#6366f1"/>
    <meta name="msapplication-TileColor" content="#6366f1"/>
    <link rel="icon" type="image/png" href="{% static 'Peashan.png' %}"/>
    <link rel="apple-touch-icon" href="{% static 'Peashan.png' %}"/>

    <!-- Fonts and Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
    <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
            rel="stylesheet"
    />
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="{% static 'css/styles.css' %}"/>
</head>

<body>
<!-- Background Elements -->
<div class="bg-elements">
    <div class="bg-element bg-element-1" id="bg-element-1"></div>
    <div class="bg-element bg-element-2"></div>
    <div class="bg-element bg-element-3"></div>
</div>

<!-- Navigation -->
<nav>
    <div class="nav-container container">
        <div class="logo">
            <img
                    src="{% static 'Peashan.png' %}"
                    alt="Peashan Brands"
                    class="logo-image"
            />
        </div>

        <div class="nav-links">
            <a href="#home" class="nav-link">Home</a>
            <a href="#services" class="nav-link">Services</a>
            <a href="#portfolio" class="nav-link">Portfolio</a>
            <a href="#partners" class="nav-link">Partners</a>
            <a href="#contact" class="nav-link">Contact</a>
        </div>

        <button
                class="mobile-menu-btn"
                id="mobile-menu-btn"
                data-icon="hamburger"
        >
            <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    class="menu-icon hamburger-icon"
            >
                <path d="M3 12h18M3 6h18M3 18h18"></path>
            </svg>
            <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="menu-icon close-icon"
            >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>

    <div class="mobile-menu" id="mobile-menu" style="display: none">
        <a href="#home" class="mobile-menu-link">Home</a>
        <a href="#services" class="mobile-menu-link">Services</a>
        <a href="#portfolio" class="mobile-menu-link">Portfolio</a>
        <a href="#partners" class="mobile-menu-link">Partners</a>
        <a href="#contact" class="mobile-menu-link">Contact</a>
    </div>
</nav>

<!-- Hero Section -->
<section id="home" class="hero">
    <div class="hero-bg-shapes">
        <div class="hero-shape"></div>
        <div class="hero-shape"></div>
        <div class="hero-shape"></div>
        <div class="hero-shape"></div>
        <div class="hero-shape"></div>
        <div class="hero-shape"></div>
    </div>
    <div class="hero-lines">
        <div class="hero-line"></div>
        <div class="hero-line"></div>
        <div class="hero-line"></div>
    </div>
    <div class="hero-particles">
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
        <div class="hero-particle"></div>
    </div>
    <div class="hero-grid"></div>
    <div class="hero-design-elements">
        <div class="design-element"></div>
        <div class="design-element"></div>
        <div class="design-element"></div>
        <div class="design-element"></div>
    </div>
    <div class="hero-waves">
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>
    <div class="container">
        <div class="hero-content">
            <div class="tag">
                <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                >
                    <path
                            d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"
                    ></path>
                </svg>
                <span>Listen, Think, Create</span>
            </div>

            <h1 class="hero-title">
                <span class="text-gradient animate-gradient">Peashan Brands</span>
            </h1>

            <p class="hero-description">
                At Peashan Brands we are a Premium Branding and Printing Solutions
                company. Transforming your ideas into stunning printed materials
                with exceptional quality and attention to detail.
            </p>

            <p class="hero-vision">
                We bring your vision to life, making you visible in a clouded world.
            </p>

            <div class="hero-actions">
                <button class="btn-primary" id="view-work-btn">
                    <span>View Our Work</span>
                    <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </button>

                <button class="btn-secondary" id="get-quote-btn">Get Quote</button>
            </div>
        </div>
    </div>
</section>

<!-- Services Section -->
<section id="services" class="services">
    <div class="container">
        <div class="text-center">
            <div class="tag">WHAT WE DO</div>
            <h2 class="section-title text-gradient">Our Services</h2>
            <p class="section-subtitle">
                Complete graphic solutions that elevate your brand to the next level
            </p>
        </div>

        <div class="services-grid">
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-flag"></i>
                </div>
                <h3 class="service-title">Banners & Stickers</h3>
                <p class="service-description">
                    High-quality banners and custom stickers for all your promotional
                    needs
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-tshirt"></i>
                </div>
                <h3 class="service-title">Merchandise Branding</h3>
                <p class="service-description">
                    Custom branding for reflective vests, umbrellas, dust coats,
                    aprons, wristbands, and other promotional items
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-book-medical"></i>
                </div>
                <h3 class="service-title">Books & Hospital Stationery</h3>
                <p class="service-description">
                    Prescription books, hospital files, custom stationery, signage,
                    apparels, and branding solutions
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-bullhorn"></i>
                </div>
                <h3 class="service-title">Campaign & Promotional Items</h3>
                <p class="service-description">
                    Branding for campaign materials, promotional items, and custom
                    merchandise solutions
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-box"></i>
                </div>
                <h3 class="service-title">Packaging Solutions</h3>
                <p class="service-description">
                    Custom packaging design, branded shopping bags, wool bags, custom
                    shapes & sizes, eco-friendly options
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h3 class="service-title">Brochures & Flyers</h3>
                <p class="service-description">
                    Professional marketing materials, various fold options,
                    full-colour printing, and bulk discounts
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-tshirt"></i>
                </div>
                <h3 class="service-title">Merchandise Branding</h3>
                <p class="service-description">
                    Custom branding for reflective vests, umbrellas, dust coats,
                    aprons, wristbands, and other promotional items
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-book-medical"></i>
                </div>
                <h3 class="service-title">Books & Hospital Stationery</h3>
                <p class="service-description">
                    Prescription books, hospital files, custom stationery, signage,
                    apparels, and branding solutions
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-bullhorn"></i>
                </div>
                <h3 class="service-title">Campaign & Promotional Items</h3>
                <p class="service-description">
                    Branding for campaign materials, promotional items, and custom
                    merchandise solutions
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-box"></i>
                </div>
                <h3 class="service-title">Packaging Solutions</h3>
                <p class="service-description">
                    Custom packaging design, branded shopping bags, wool bags, custom
                    shapes & sizes, eco-friendly options
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
            <div class="service-card">
                <div class="service-icon">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h3 class="service-title">Brochures & Flyers</h3>
                <p class="service-description">
                    Professional marketing materials, various fold options,
                    full-colour printing, and bulk discounts
                </p>
                <div class="service-link text-gradient">
                    <span>Learn More</span>
                    <svg
                            width="16"
                            height="16"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Portfolio Section -->
<section id="portfolio" class="portfolio">
    <div class="container">
        <div class="text-center">
            <div class="tag">OUR WORK</div>
            <h2 class="section-title text-gradient">Portfolio</h2>
            <p class="section-subtitle">
                Showcasing our passion for exceptional design
            </p>

            <div class="portfolio-controls" id="portfolio-controls">
                <div class="portfolio-search">
                    <div class="search-container">
                        <i class="fas fa-search search-icon"></i>
                        <label for="portfolio-search"></label>
                        <input
                                type="text"
                                class="search-input"
                                id="portfolio-search"
                                placeholder="Search projects..."
                        />
                        <button
                                class="search-clear"
                                id="search-clear"
                                style="display: none"
                        >
                            <svg
                                    width="16"
                                    height="16"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                            >
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>

                {% if all_tags %}
                    <div class="portfolio-filters" id="portfolio-filters">
                        <button class="filter-btn active" data-filter="all">All</button>
                        {% for tag in all_tags %}
                            <button class="filter-btn" data-filter="{{ tag.name|lower }}">
                                {{ tag.name }}
                            </button>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="portfolio-grid" id="portfolioGrid">
            <!-- Loading state - visible by default -->
            <div class="portfolio-loading" id="portfolioLoading">
                <div class="loading-spinner"></div>
                <p>Loading portfolio items...</p>
            </div>
        </div>

        <!-- No Results State (hidden by default) -->
        <div
                class="no-results-state"
                id="no-results-state"
                style="display: none"
        >
            <div class="no-results-icon">🔍</div>
            <p class="no-results-text">No projects found</p>
            <p class="no-results-hint">Try different keywords or filters</p>
            <button class="btn-secondary" id="clear-search-filters">
                Clear Search & Filters
            </button>
        </div>

        <!-- See More Button -->
        <div class="portfolio-see-more">
            <button class="btn-see-more" id="see-more-portfolio">
                <span id="see-more-text">See More Work</span>
                <div
                        class="see-more-loading"
                        id="see-more-loading"
                        style="display: none"
                >
                    <div class="loading-spinner-small"></div>
                </div>
                <svg
                        width="20"
                        height="20"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                >
                    <path d="M12 5v14M5 12l7 7 7-7"></path>
                </svg>
            </button>
            <p class="portfolio-more-text">
                Discover more of our creative projects and graphic design solutions
            </p>
        </div>
    </div>
</section>

<!-- Lightbox -->
<div class="lightbox" id="lightbox" style="display: none">
    <div class="lightbox-content">
        <div class="lightbox-image-wrapper">
            <img src="" alt="" id="lightbox-image" class="lightbox-image"/>
        </div>
        <div class="lightbox-text">
            <h3 class="lightbox-title" id="lightbox-title">Delivery Van Wrap</h3>
            <p class="lightbox-description" id="lightbox-description">
                Full vehicle branding for FoodHub
            </p>
        </div>
        <button
                class="lightbox-close-btn"
                id="close-lightbox"
                aria-label="Close lightbox"
        >
            <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
            >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
        </button>
    </div>
</div>

<!-- Partners Section -->
<section id="partners" class="partners">
    <div class="container">
        <div class="text-center">
            <div class="tag">PARTNERSHIPS</div>
            <h2 class="section-title text-gradient">Trusted By</h2>
            <p class="section-subtitle">
                Working with amazing brands across industries
            </p>
        </div>

        <div class="partners-carousel">
            <div
                    class="partner-item"
                    style="
              transform: translateX(-400px) scale(0.7);
              opacity: 0.4;
              z-index: 5;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/1.png' %}"
                            alt="Partner 1"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Steve Morden Moulding</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(-220px) scale(1);
              opacity: 0.7;
              z-index: 6;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/2.png' %}"
                            alt="Partner 2"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Hallo Fresh</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(0px) scale(1.3);
              opacity: 1;
              z-index: 7;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/3.png' %}"
                            alt="Partner 3"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Hallo Fresh</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(220px) scale(1);
              opacity: 0.7;
              z-index: 6;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/4.png' %}"
                            alt="Partner 4"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Noorin Pharmaceuticals Limited</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(440px) scale(0.7);
              opacity: 0.4;
              z-index: 5;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/5.png' %}"
                            alt="Partner 5"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Medicatia Hospital</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(660px) scale(0.4);
              opacity: 0.15;
              z-index: 4;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/6.png' %}"
                            alt="Partner 6"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Drimaz Stationery</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(880px) scale(0.2);
              opacity: 0.05;
              z-index: 3;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/7.png' %}"
                            alt="Partner 7"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Sahra Collection and Perfumes</div>
            </div>
            <div
                    class="partner-item"
                    style="
              transform: translateX(1100px) scale(0.1);
              opacity: 0.02;
              z-index: 2;
            "
            >
                <div class="partner-logo-image">
                    <img
                            src="{% static 'partners/8.png' %}"
                            alt="Partner 8"
                            class="partner-img"
                    />
                </div>
                <div class="partner-name">Faulu Homes Limited</div>
            </div>
        </div>

        <div class="partners-dots">
            <button class="dot" data-index="0"></button>
            <button class="dot" data-index="1"></button>
            <button class="dot" data-index="2"></button>
            <button class="dot" data-index="3"></button>
            <button class="dot" data-index="4"></button>
            <button class="dot" data-index="5"></button>
            <button class="dot" data-index="6"></button>
            <button class="dot" data-index="7"></button>
        </div>
    </div>
</section>

<!-- Contact Section -->
<section id="contact" class="contact">
    <div class="container">
        <div class="text-center">
            <div class="tag">GET IN TOUCH</div>
            <h2 class="section-title text-gradient">Let's Create Magic</h2>
            <p class="section-subtitle">Transform your vision into reality</p>
        </div>

        <div class="contact-grid">
            <div class="contact-info">
                <div class="contact-card">
                    <h3 class="contact-card-title">Contact Information</h3>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                            >
                                <path
                                        d="M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"
                                ></path>
                            </svg>
                        </div>
                        <div>
                            <div class="contact-label">Phone</div>
                            <div class="contact-value">
                                {{ config.contact_number|default:"+254 700 000 000" }}
                            </div>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                            >
                                <path
                                        d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"
                                ></path>
                                <polyline points="22,6 12,13 2,6"></polyline>
                            </svg>
                        </div>
                        <div>
                            <div class="contact-label">Email</div>
                            <div class="contact-value">
                                {{ admin_email |default:"info@peashan.co.ke" }}
                            </div>
                        </div>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">
                            <svg
                                    width="24"
                                    height="24"
                                    viewBox="0 0 24 24"
                                    fill="none"
                                    stroke="currentColor"
                                    stroke-width="2"
                            >
                                <path
                                        d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z"
                                ></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                        </div>
                        <div>
                            <div class="contact-label">Location</div>
                            <div class="contact-value">
                                {{ config.address|default:"Nairobi, Kenya" }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="contact-card">
                    <h3 class="contact-card-title">Follow Us</h3>
                    <div class="social-links">
                        {% if config.facebook_username %}
                            <a
                                    href="https://facebook.com/{{ config.facebook_username }}"
                                    class="social-link"
                                    target="_blank"
                                    rel="noopener"
                            >
                                <i class="fab fa-facebook-f"></i>
                            </a>
                        {% else %}
                            <div class="social-link">
                                <i class="fab fa-facebook-f"></i>
                            </div>
                        {% endif %} {% if config.instagram_username %}
                        <a
                                href="https://instagram.com/{{ config.instagram_username }}"
                                class="social-link"
                                target="_blank"
                                rel="noopener"
                        >
                            <i class="fab fa-instagram"></i>
                        </a>
                    {% else %}
                        <div class="social-link">
                            <i class="fab fa-instagram"></i>
                        </div>
                    {% endif %} {% if config.twitter_username %}
                        <a
                                href="https://twitter.com/{{ config.twitter_username }}"
                                class="social-link"
                                target="_blank"
                                rel="noopener"
                        >
                            <i class="fab fa-twitter"></i>
                        </a>
                    {% else %}
                        <div class="social-link">
                            <i class="fab fa-twitter"></i>
                        </div>
                    {% endif %} {% if config.tiktok %}
                        <a
                                href="https://tiktok.com/@{{ config.tiktok }}"
                                class="social-link"
                                target="_blank"
                                rel="noopener"
                        >
                            <i class="fab fa-tiktok"></i>
                        </a>
                    {% else %}
                        <div class="social-link">
                            <i class="fab fa-tiktok"></i>
                        </div>
                    {% endif %}
                    </div>
                </div>
            </div>

            <div class="contact-form">
                {% csrf_token %}
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input
                            type="text"
                            class="form-input"
                            id="name"
                            placeholder="Your name"
                            required
                    />
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input
                            type="email"
                            class="form-input"
                            id="email"
                            placeholder="your@email.com"
                            required
                    />
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input
                            type="tel"
                            class="form-input"
                            id="phone"
                            placeholder="+254 700 000 000"
                            required
                    />
                </div>
                <div class="form-group">
                    <label class="form-label">Service Type</label>
                    <select class="form-select" id="service" required>
                        <option value="" disabled selected>Select a service</option>
                        <option value="banners-stickers">Banners & Stickers</option>
                        <option value="merchandise">Merchandise Branding</option>
                        <option value="hospital-stationery">
                            Books & Hospital Stationery
                        </option>
                        <option value="campaign-items">
                            Campaign & Promotional Items
                        </option>
                        <option value="packaging">Packaging Solutions</option>
                        <option value="brochures-flyers">Brochures & Flyers</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Project Description</label>
                    <textarea
                            class="form-textarea"
                            id="message"
                            placeholder="Tell us about your project..."
                            required
                    ></textarea>
                </div>
                <button class="btn-primary w-full" id="submit-form">
                    <span>Get Your Free Quote</span>
                    <svg
                            width="20"
                            height="20"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                    >
                        <path d="M5 12h14M12 5l7 7-7 7"></path>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer>
    <div class="container">
        <div class="footer-content">
            <div class="footer-logo">
                <img
                        src="{% static 'Peashan.png' %}"
                        alt="Peashan Brands"
                        class="footer-logo-image"
                />
            </div>
            <p class="footer-description">
                Premium printing and branding solutions since 2014
            </p>
            <div class="footer-social">
                {% if config.facebook_username %}
                    <a
                            href="https://facebook.com/{{ config.facebook_username }}"
                            class="footer-social-link"
                            target="_blank"
                            rel="noopener"
                    >
                        <i class="fab fa-facebook-f"></i>
                    </a>
                {% else %}
                    <div class="footer-social-link">
                        <i class="fab fa-facebook-f"></i>
                    </div>
                {% endif %} {% if config.instagram_username %}
                <a
                        href="https://instagram.com/{{ config.instagram_username }}"
                        class="footer-social-link"
                        target="_blank"
                        rel="noopener"
                >
                    <i class="fab fa-instagram"></i>
                </a>
            {% else %}
                <div class="footer-social-link">
                    <i class="fab fa-instagram"></i>
                </div>
            {% endif %} {% if config.twitter_username %}
                <a
                        href="https://twitter.com/{{ config.twitter_username }}"
                        class="footer-social-link"
                        target="_blank"
                        rel="noopener"
                >
                    <i class="fab fa-twitter"></i>
                </a>
            {% else %}
                <div class="footer-social-link">
                    <i class="fab fa-twitter"></i>
                </div>
            {% endif %} {% if config.tiktok %}
                <a
                        href="https://tiktok.com/@{{ config.tiktok }}"
                        class="footer-social-link"
                        target="_blank"
                        rel="noopener"
                >
                    <i class="fab fa-tiktok"></i>
                </a>
            {% else %}
                <div class="footer-social-link">
                    <i class="fab fa-tiktok"></i>
                </div>
            {% endif %}
            </div>
            <div class="footer-divider">
                <p class="footer-copyright">
                    © 2025 Peashan Brands. All rights reserved.
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- WhatsApp Floating Button -->
<div
        class="whatsapp-float {% if not config.contact_number %}disabled{% endif %}"
        id="whatsapp-float"
>
    <div class="whatsapp-icon">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
            <path
                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"
                    fill="currentColor"
            ></path>
        </svg>
    </div>
    <div class="whatsapp-text">Chat with us!</div>
</div>

<!-- WhatsApp Modal -->
<div class="whatsapp-modal" id="whatsapp-modal" style="display: none">
    <div class="whatsapp-modal-content">
        <div class="whatsapp-modal-header">
            <h3>💬 Chat with Peashan Brands</h3>
            <button class="whatsapp-modal-close" id="whatsapp-modal-close">
                <svg
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                >
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
        </div>

        <div class="whatsapp-modal-body">
            <div class="whatsapp-welcome">
                <div class="whatsapp-avatar">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                        <path
                                d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"
                                fill="#25D366"
                        ></path>
                    </svg>
                </div>
                <p>Hi! 👋 Send us a message, and we'll get back to you shortly.</p>
            </div>

            <div class="whatsapp-form-container">
                <form class="whatsapp-form" id="whatsapp-form">
                    <div class="form-group">
                        <label class="form-label">Your Message</label>
                        <label for="whatsapp-message"></label>
                        <textarea
                                class="form-textarea"
                                id="whatsapp-message"
                                placeholder="Tell us about your project..."
                                rows="4"
                                required
                        ></textarea>
                    </div>

                    <button type="submit" class="whatsapp-submit-btn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.890-5.335 11.893-11.893A11.821 11.821 0 0020.465 3.516"
                                    fill="currentColor"
                            ></path>
                        </svg>
                        <span>Send via WhatsApp</span>
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    const config = {
        contact_number: '{{ config.contact_number|default:"" }}',
    };
</script>
<script>
    const debounce = (fn, delay) => {
        let timeout;
        return (...args) => {
            clearTimeout(timeout);
            timeout = setTimeout(() => fn(...args), delay);
        };
    };

    const throttle = (fn, delay) => {
        let lastCall = 0;
        return (...args) => {
            const now = Date.now();
            if (now - lastCall >= delay) {
                lastCall = now;
                fn(...args);
            }
        };
    };

    document.addEventListener("DOMContentLoaded", () => {
        initNavigation();
        initScrollEffects();
        initPortfolio();
        initPartners();
        initForms();
        initWhatsApp();
        initAnimations();
    });

    function initNavigation() {
        const nav = document.querySelector("nav");
        const mobileMenuBtn = document.getElementById("mobile-menu-btn");
        const mobileMenu = document.getElementById("mobile-menu");
        const navHeight = nav.offsetHeight;

        const handleScroll = throttle(() => {
            nav.classList.toggle("scrolled", window.scrollY > 100);
        }, 100);

        const handleResize = throttle(() => {
            if (window.innerWidth > 768) {
                mobileMenu.style.display = "none";
                mobileMenuBtn.setAttribute("data-icon", "hamburger");
            }
        }, 100);

        window.addEventListener("scroll", handleScroll, {passive: true});
        window.addEventListener("resize", handleResize, {passive: true});

        mobileMenuBtn.addEventListener("click", () => {
            const isVisible = mobileMenu.style.display === "block";
            mobileMenu.style.display = isVisible ? "none" : "block";
            mobileMenuBtn.setAttribute(
                "data-icon",
                isVisible ? "hamburger" : "close"
            );
        });

        document.addEventListener("click", (e) => {
            const link = e.target.closest(".nav-link, .mobile-menu-link");
            if (!link) return;

            e.preventDefault();
            const targetId = link.getAttribute("href");
            const targetSection = document.querySelector(targetId);

            if (!targetSection) return;

            window.scrollTo({
                top: targetSection.offsetTop - navHeight,
                behavior: "smooth",
            });

            if (mobileMenu.style.display === "block") {
                mobileMenu.style.display = "none";
                mobileMenuBtn.setAttribute("data-icon", "hamburger");
            }
        });
    }

    function initScrollEffects() {
        const observerOptions = {
            threshold: 0.1,
            rootMargin: "0px 0px -100px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach((entry) => {
                if (entry.isIntersecting) {
                    entry.target.classList.remove("animate-out");
                    entry.target.classList.add("animate-in");
                }
            });
        }, observerOptions);

        const animatedElements = document.querySelectorAll(
            ".service-card, .portfolio-item, .contact-card"
        );
        animatedElements.forEach((el, index) => {
            el.classList.add("animate-out");
            el.style.setProperty("--transition-delay", `${index * 0.1}s`);
            observer.observe(el);
        });

        const portfolioObserver = new IntersectionObserver(
            (entries) => {
                entries.forEach((entry, index) => {
                    if (entry.isIntersecting) {
                        const item = entry.target;
                        item.style.animationDelay = `${index * 1}s`;
                        item.classList.add("animate-in");
                    }
                });
            },
            {threshold: 0.1}
        );

        const portfolioItems = document.querySelectorAll(".portfolio-item");
        portfolioItems.forEach((item, index) => {
            portfolioObserver.observe(item);
        });

        const bgElement1 = document.getElementById("bg-element-1");
        if (!bgElement1) return;

        let mouseX = 0,
            mouseY = 0,
            currentX = 0,
            currentY = 0;

        const handleMouseMove = throttle((e) => {
            mouseX = (e.clientX / window.innerWidth - 0.5) * 50;
            mouseY = (e.clientY / window.innerHeight - 0.5) * 50;
        }, 16);

        document.addEventListener("mousemove", handleMouseMove, {
            passive: true,
        });

        function animateBackground() {
            currentX += (mouseX - currentX) * 0.05;
            currentY += (mouseY - currentY) * 0.05;
            bgElement1.style.transform = `translate(${currentX}px, ${currentY}px)`;
            requestAnimationFrame(animateBackground);
        }

        animateBackground();
    }

    function initPortfolio() {
        const portfolioGrid = document.querySelector(".portfolio-grid");
        const portfolioItems = document.querySelectorAll(".portfolio-item");
        const filterBtns = document.querySelectorAll(".filter-btn");
        const searchInput = document.getElementById("portfolio-search");
        const searchClear = document.getElementById("search-clear");
        const lightbox = document.getElementById("lightbox");
        const lightboxImage = document.getElementById("lightbox-image");
        const lightboxTitle = document.getElementById("lightbox-title");
        const lightboxDescription = document.getElementById(
            "lightbox-description"
        );
        const closeLightbox = document.getElementById("close-lightbox");
        const seeMoreBtn = document.getElementById("see-more-portfolio");
        const emptyState = document.getElementById("empty-portfolio-state");
        const noResultsState = document.getElementById("no-results-state");

        let currentPage = 1;
        let currentFilters = [];
        let currentSearch = "";
        let isLoading = false;
        let hasMorePages = true;
        const itemsPerPage = 6;

        // Load initial portfolio items on page load
        loadPortfolioItems(1, false);

        function applyFilters() {
            currentPage = 1;
            loadPortfolioItems(1, false);
        }

        // Function to load portfolio items from server
        async function loadPortfolioItems(page = 1, append = false) {
            if (isLoading) return;

            isLoading = true;
            if (!append) {
                showLoadingState();
            }

            try {
                const params = new URLSearchParams({
                    page: page,
                    per_page: itemsPerPage,
                    search: currentSearch,
                });

                if (currentFilters.length > 0) {
                    params.set("tags", currentFilters.join(","));
                }

                const response = await fetch(`/api/gallery/?${params}`, {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json",
                        "X-Requested-With": "XMLHttpRequest",
                    },
                });

                if (!response.ok)
                    throw new Error(`HTTP error! status: ${response.status}`);

                const data = await response.json();

                if (data.success) {
                    hasMorePages = data.pagination.has_next;
                    currentPage = data.pagination.current_page;

                    if (append) {
                        renderPortfolioItems(data.items, true);
                    } else {
                        renderPortfolioItems(data.items, false);
                    }

                    // Update button visibility
                    if (seeMoreBtn) {
                        seeMoreBtn.style.display = hasMorePages
                            ? "inline-flex"
                            : "none";
                    }
                } else {
                    throw new Error(data.message || "Failed to fetch portfolio data");
                }
            } catch (error) {
                console.error("Error loading portfolio items:", error);
                showNotification(
                    "Failed to load portfolio items. Please try again.",
                    "error"
                );
            } finally {
                isLoading = false;
                hideLoadingState();
            }
        }

        function showLoadingState() {
            const loadingElement = document.getElementById("portfolioLoading");
            if (loadingElement) {
                loadingElement.style.display = "flex";
            }
        }

        function hideLoadingState() {
            const loadingElement = document.getElementById("portfolioLoading");
            if (loadingElement) {
                loadingElement.style.display = "none";
            }
        }

        function renderPortfolioItems(items, append = false) {
            const portfolioGrid = document.getElementById("portfolioGrid");
            if (!portfolioGrid) return;

            if (!append) {
                portfolioGrid.innerHTML = "";
            }

            if (items.length === 0) {
                showNoResults();
                return;
            }

            hideNoResults();

            const fragment = document.createDocumentFragment();
            items.forEach((item, index) => {
                const portfolioItem = createPortfolioItemElement(item, index);
                fragment.appendChild(portfolioItem);
            });

            portfolioGrid.appendChild(fragment);
        }

        function escapeHtml(str) {
            if (str == null) return "";
            return String(str)
                .replaceAll("&", "&amp;")
                .replaceAll("<", "&lt;")
                .replaceAll(">", "&gt;")
                .replaceAll('"', "&quot;")
                .replaceAll("'", "&#39;");
        }

        function truncateString(str, maxLen) {
            if (str == null) return "";
            if (str.length <= maxLen) return str;
            // keep the total length <= maxLen, using a single ellipsis character
            return str.slice(0, maxLen - 1) + "…";
        }

        function createPortfolioItemElement(item, index) {
            const div = document.createElement("div");
            div.className = "portfolio-item fade-in-up";
            div.dataset.category = (item.tags || []).join(" ");
            div.dataset.itemId = item.id ?? "";
            div.style.setProperty("--animation-delay", `${index * 0.1}s`);

            const tagsHtml = (item.tags && item.tags.length)
                ? item.tags.map(tag => `<span class="portfolio-tag">${escapeHtml(tag)}</span>`).join("")
                : "";

            const rawDescription = (item.description && item.description.trim())
                ? item.description
                : "Premium printing project showcasing our quality work.";
            const truncated = truncateString(rawDescription, 120);
            const safeDescription = escapeHtml(truncated);
            const safeFullDescription = escapeHtml(rawDescription);

            div.dataset.fullDescription = safeFullDescription;

            div.innerHTML = `
    <div class="portfolio-image-wrapper">
      <img src="${escapeHtml(item.thumbnail || '/static/default.jpg')}" alt="${escapeHtml(item.title || '')}" class="portfolio-image"
           onerror="this.onerror=null; this.src='/static/default.jpg';">
      <div class="portfolio-overlay">
        <div class="portfolio-overlay-icon">
          <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"></path>
          </svg>
        </div>
      </div>
    </div>

    <div class="portfolio-content">
      <h3 class="portfolio-title">${escapeHtml(item.title || "")}</h3>
      <p class="portfolio-description">${safeDescription}</p>
      ${tagsHtml ? `<div class="portfolio-tags">${tagsHtml}</div>` : ""}
      <div class="portfolio-link text-gradient">
        <span>View Details</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"></path>
        </svg>
      </div>
    </div>
  `;

            return div;
        }


        function showNoResults() {
            const portfolioGrid = document.getElementById("portfolioGrid");
            const portfolioControls =
                document.getElementById("portfolio-controls");
            const portfolioFilters = document.getElementById("portfolio-filters");
            const noResultsState = document.getElementById("no-results-state");

            if (portfolioGrid) {
                portfolioGrid.style.display = "none";
            }

            if (portfolioControls) {
                portfolioControls.style.display = "none";
            }

            if (portfolioFilters) {
                portfolioFilters.style.display = "none";
            }

            if (noResultsState) {
                noResultsState.style.display = "flex";
            }

            if (seeMoreBtn) seeMoreBtn.style.display = "none";
        }

        function hideNoResults() {
            const portfolioGrid = document.getElementById("portfolioGrid");
            const portfolioControls =
                document.getElementById("portfolio-controls");
            const portfolioFilters = document.getElementById("portfolio-filters");
            const noResultsState = document.getElementById("no-results-state");

            if (portfolioGrid) {
                portfolioGrid.style.display = "grid";
            }

            if (portfolioControls) {
                portfolioControls.style.display = "flex";
            }

            // Filters are now conditionally rendered in template, so just show them
            if (portfolioFilters) {
                portfolioFilters.style.display = "flex";
            }

            if (noResultsState) {
                noResultsState.style.display = "none";
            }
        }

        portfolioGrid?.addEventListener("click", (e) => {
            const filterBtn = e.target.closest(".filter-btn");
            if (filterBtn) {
                const filterValue = filterBtn.dataset.filter;
                if (filterValue === "all") {
                    // Clear all filters when "All" is clicked
                    filterBtns.forEach((b) => b.classList.remove("active"));
                    filterBtn.classList.add("active");
                    currentFilters = [];
                } else {
                    // Toggle individual tag filters
                    const allBtn = document.querySelector(
                        '.filter-btn[data-filter="all"]'
                    );
                    allBtn?.classList.remove("active");

                    if (currentFilters.includes(filterValue)) {
                        // Remove filter
                        currentFilters = currentFilters.filter(
                            (f) => f !== filterValue
                        );
                        filterBtn.classList.remove("active");
                        // If no filters selected, activate "All"
                        if (currentFilters.length === 0) {
                            allBtn?.classList.add("active");
                        }
                    } else {
                        // Add filter
                        currentFilters.push(filterValue);
                        filterBtn.classList.add("active");
                    }
                }
                applyFilters();
                return;
            }

            const portfolioItem = e.target.closest(".portfolio-item");
            if (portfolioItem && !portfolioItem.classList.contains("hidden")) {
                const img = portfolioItem.querySelector(".portfolio-image");
                const title =
                    portfolioItem.querySelector(".portfolio-title").textContent;
                const description = portfolioItem.dataset.fullDescription;

                lightboxImage.src = img.src;
                lightboxImage.alt = title;
                lightboxTitle.textContent = title;
                lightboxDescription.textContent = description;
                lightbox.style.display = "flex";
                document.body.style.overflow = "hidden";
            }
        });

        const handleSearch = debounce((e) => {
            currentSearch = e.target.value.trim();
            searchClear.style.display = currentSearch ? "flex" : "none";
            applyFilters();
        }, 300);

        searchInput?.addEventListener("input", handleSearch);

        searchClear?.addEventListener("click", () => {
            searchInput.value = "";
            currentSearch = "";
            searchClear.style.display = "none";
            applyFilters();
        });

        // Clear search and filters button
        const clearSearchFiltersBtn = document.getElementById(
            "clear-search-filters"
        );
        clearSearchFiltersBtn?.addEventListener("click", () => {
            // Clear search
            searchInput.value = "";
            currentSearch = "";
            searchClear.style.display = "none";

            // Clear all filters
            currentFilters = [];
            filterBtns.forEach((btn) => btn.classList.remove("active"));
            const allBtn = document.querySelector(
                '.filter-btn[data-filter="all"]'
            );
            allBtn?.classList.add("active");

            applyFilters();
        });

        // Initialize "All" filter as active
        const allFilterBtn = document.querySelector(
            '.filter-btn[data-filter="all"]'
        );
        if (allFilterBtn) {
            allFilterBtn.classList.add("active");
        }

        seeMoreBtn?.addEventListener("click", () => {
            const seeMoreText = document.getElementById("see-more-text");
            const seeMoreLoading = document.getElementById("see-more-loading");

            if (seeMoreText) seeMoreText.style.display = "none";
            if (seeMoreLoading) seeMoreLoading.style.display = "block";

            currentPage += 1;
            loadPortfolioItems(currentPage, true).finally(() => {
                if (seeMoreText) seeMoreText.style.display = "inline";
                if (seeMoreLoading) seeMoreLoading.style.display = "none";
            });
        });

        const closeLightboxHandler = () => {
            lightbox.style.display = "none";
            document.body.style.overflow = "auto";
        };

        closeLightbox?.addEventListener("click", closeLightboxHandler);

        lightbox?.addEventListener("click", (e) => {
            if (e.target === lightbox) closeLightboxHandler();
        });

        document.addEventListener("keydown", (e) => {
            if (e.key === "Escape" && lightbox.style.display === "flex") {
                closeLightboxHandler();
            }
        });
    }

    function initPartners() {
        const partnerItems = document.querySelectorAll(".partner-item");
        const dots = document.querySelectorAll(".partners-dots .dot");
        const itemCount = partnerItems.length;

        if (itemCount === 0) return;

        let currentIndex = 0;
        let autoAdvanceInterval;

        const positions = [
            {translateX: 0, scale: 1.3, opacity: 1, zIndex: 7},
            {translateX: 220, scale: 1.0, opacity: 0.7, zIndex: 6},
            {translateX: -220, scale: 1.0, opacity: 0.7, zIndex: 6},
            {translateX: 440, scale: 0.7, opacity: 0.4, zIndex: 5},
            {translateX: -440, scale: 0.7, opacity: 0.4, zIndex: 5},
            {translateX: 660, scale: 0.4, opacity: 0.15, zIndex: 4},
            {translateX: -660, scale: 0.4, opacity: 0.15, zIndex: 4},
            {translateX: 880, scale: 0.2, opacity: 0.05, zIndex: 3},
            {translateX: -880, scale: 0.2, opacity: 0.05, zIndex: 3},
        ];

        function getPosition(relativeIndex) {
            if (relativeIndex === 0) return positions[0];
            if (relativeIndex === 1 || relativeIndex === itemCount - 1) {
                return relativeIndex === 1 ? positions[1] : positions[2];
            }
            if (relativeIndex === 2 || relativeIndex === itemCount - 2) {
                return relativeIndex === 2 ? positions[3] : positions[4];
            }
            if (relativeIndex === 3 || relativeIndex === itemCount - 3) {
                return relativeIndex === 3 ? positions[5] : positions[6];
            }
            return relativeIndex < itemCount / 2 ? positions[7] : positions[8];
        }

        function updateCarousel(animate = true) {
            requestAnimationFrame(() => {
                partnerItems.forEach((item, index) => {
                    const relativeIndex =
                        (index - currentIndex + itemCount) % itemCount;
                    const pos = getPosition(relativeIndex);

                    item.classList.toggle("partner-animate", animate);
                    item.style.transform = `translateX(${pos.translateX}px) scale(${pos.scale})`;
                    item.style.opacity = pos.opacity;
                    item.style.zIndex = pos.zIndex;
                });

                dots.forEach((dot, index) => {
                    dot.classList.toggle("active", index === currentIndex);
                });
            });
        }

        function startAutoAdvance() {
            stopAutoAdvance();
            autoAdvanceInterval = setInterval(() => {
                currentIndex = (currentIndex + 1) % itemCount;
                updateCarousel();
            }, 4000);
        }

        function stopAutoAdvance() {
            if (autoAdvanceInterval) {
                clearInterval(autoAdvanceInterval);
                autoAdvanceInterval = null;
            }
        }

        document.addEventListener("click", (e) => {
            const dot = e.target.closest(".partners-dots .dot");
            if (dot) {
                currentIndex = Array.from(dots).indexOf(dot);
                updateCarousel();
                startAutoAdvance();
                return;
            }

            const partner = e.target.closest(".partner-item");
            if (partner) {
                const index = Array.from(partnerItems).indexOf(partner);
                currentIndex = index;
                updateCarousel();
                startAutoAdvance();
            }
        });

        updateCarousel(false);
        startAutoAdvance();
    }

    function initForms() {
        const contactForm = document.querySelector(".contact-form");
        const viewWorkBtn = document.getElementById("view-work-btn");
        const getQuoteBtn = document.getElementById("get-quote-btn");
        const nav = document.querySelector("nav");
        const navHeight = nav?.offsetHeight || 0;

        const scrollToSection = (selector) => {
            const section = document.querySelector(selector);
            if (!section) return;

            window.scrollTo({
                top: section.offsetTop - navHeight,
                behavior: "smooth",
            });
        };

        viewWorkBtn?.addEventListener("click", () =>
            scrollToSection("#portfolio")
        );
        getQuoteBtn?.addEventListener("click", () =>
            scrollToSection("#contact")
        );

        contactForm?.addEventListener("submit", async (e) => {
            e.preventDefault();

            const formData = new FormData(contactForm);
            const submitBtn = contactForm.querySelector('[type="submit"]');
            const originalBtnHTML = submitBtn.innerHTML;

            const requiredFields = [
                "name",
                "email",
                "phone",
                "service",
                "message",
            ];
            const missingFields = requiredFields.filter(
                (field) => !formData.get(field)?.trim()
            );

            if (missingFields.length > 0) {
                showNotification("Please fill in all fields", "error");
                return;
            }

            const email = formData.get("email");
            if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                showNotification("Please enter a valid email address", "error");
                return;
            }

            submitBtn.innerHTML = "<span>Sending...</span>";
            submitBtn.disabled = true;

            setTimeout(() => {
                showNotification(
                    "Thank you! We'll get back to you shortly.",
                    "success"
                );
                contactForm.reset();
                submitBtn.innerHTML = originalBtnHTML;
                submitBtn.disabled = false;
            }, 1500);
        });
    }

    function initWhatsApp() {
        const whatsappFloat = document.getElementById("whatsapp-float");
        const whatsappModal = document.getElementById("whatsapp-modal");
        const whatsappModalClose = document.getElementById(
            "whatsapp-modal-close"
        );
        const whatsappForm = document.getElementById("whatsapp-form");

        whatsappFloat?.addEventListener("click", () => {
            if (!config.contact_number) return; // Don't open modal if no contact number
            const isVisible = whatsappModal.style.display === "block";
            whatsappModal.style.display = isVisible ? "none" : "block";
        });

        whatsappModalClose?.addEventListener("click", () => {
            whatsappModal.style.display = "none";
        });

        whatsappForm?.addEventListener("submit", (e) => {
            e.preventDefault();

            const messageField = document.getElementById("whatsapp-message");
            const message = messageField?.value.trim();

            if (!message) {
                showNotification("Please enter a message", "error");
                return;
            }

            const phoneNumber = '{{ config.contact_number|default:"" }}'.replace(
                /\D/g,
                ""
            );
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(
                message
            )}`;

            window.open(whatsappUrl, "_blank");
            whatsappModal.style.display = "none";
            whatsappForm.reset();
        });

        document.addEventListener("click", (e) => {
            if (
                !whatsappFloat?.contains(e.target) &&
                !whatsappModal?.contains(e.target)
            ) {
                whatsappModal.style.display = "none";
            }
        });
    }

    function initAnimations() {
        const serviceCards = document.querySelectorAll(".service-card");

        serviceCards.forEach((card) => {
            const icon = card.querySelector(".service-icon");

            card.addEventListener("mouseenter", () => {
                if (icon) {
                    icon.classList.add("bounce-animation");
                }
            });

            card.addEventListener("mouseleave", () => {
                if (icon) {
                    icon.classList.remove("bounce-animation");
                }
            });
        });
    }

    function showNotification(message, type = "info") {
        const existing = document.querySelector(".notification");
        existing?.remove();

        const notification = document.createElement("div");
        notification.className = `notification ${type}`;
        notification.textContent = message;
        document.body.appendChild(notification);

        setTimeout(() => notification.remove(), 3000);
    }
</script>
</body>
</html>
